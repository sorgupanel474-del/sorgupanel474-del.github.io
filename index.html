<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Neon Pack Arena</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;touch-action:none;user-select:none}
body{background:linear-gradient(#0a2a43,#000);overflow:hidden;font-family:Arial}
.neon{color:#00eaff;text-shadow:0 0 10px #00eaff,0 0 20px #00eaff;text-align:center}
#menu{position:absolute;inset:0;background:#000;display:flex;flex-direction:column;justify-content:center;gap:20px;z-index:10}
button{padding:15px;font-size:18px;background:#00eaff;border:none;border-radius:10px}
#game{position:relative;width:100vw;height:100vh}
.player{position:absolute;width:22px;height:40px;background:#fff;border-radius:6px}
.enemy{position:absolute;width:20px;height:36px;background:#ff5555;border-radius:6px}
.boss{position:absolute;width:40px;height:60px;background:#a020f0;box-shadow:0 0 20px #a020f0;border-radius:8px}
.bullet{position:absolute;width:6px;height:6px;background:#00eaff;box-shadow:0 0 10px #00eaff;border-radius:50%}
#joy{position:absolute;left:20px;bottom:20px;width:120px;height:120px;border:2px solid #00eaff;border-radius:50%}
#stick{position:absolute;left:40px;top:40px;width:40px;height:40px;background:#00eaff;border-radius:50%}
</style>
</head>

<body>

<div id="menu">
  <h1 class="neon">OYUNUMUZA HOŞGELDİNİZ</h1>
  <h2 class="neon">NEON PACK ARENA</h2>
  <button onclick="start()">BAŞLA</button>
</div>

<div id="game">
  <div id="joy"><div id="stick"></div></div>
</div>

<script>
const game=document.getElementById("game");
const menu=document.getElementById("menu");

let player,px,py;
let playerHP=120;
let bullets=[];
let enemies=[];
let boss=null;
let firing=false;

// BAŞLAT
function start(){
  menu.style.display="none";
  spawnPlayer();
  spawnEnemies();
  requestAnimationFrame(loop);
}

// OYUNCU
function spawnPlayer(){
  player=document.createElement("div");
  player.className="player";
  px=innerWidth/2;
  py=innerHeight/2;
  player.style.left=px+"px";
  player.style.top =py+"px";
  game.appendChild(player);
}

// KÜÇÜK RAKİPLER
function spawnEnemies(){
  enemies=[];
  for(let i=0;i<3;i++){
    let e=document.createElement("div");
    e.className="enemy";
    e.x=Math.random()*(innerWidth-40);
    e.y=Math.random()*(innerHeight-80);
    e.hp=200;
    e.damage=80;
    e.speed=0.7;
    e.hitCd=0;
    game.appendChild(e);
    enemies.push(e);
  }
}

// BOSS
function spawnBoss(){
  boss=document.createElement("div");
  boss.className="boss";
  boss.x=100;
  boss.y=100;
  boss.hp=400;
  boss.damage=100;
  boss.speed=1.3;
  boss.hitCd=0;
  game.appendChild(boss);
}

// ATIŞ
function shoot(){
  if(!firing) return;
  let b=document.createElement("div");
  b.className="bullet";
  b.x=px+10;
  b.y=py+10;
  game.appendChild(b);
  bullets.push(b);
}
setInterval(shoot,180);
document.body.addEventListener("touchstart",()=>firing=true);
document.body.addEventListener("touchend",()=>firing=false);

// JOYSTICK
const joy=document.getElementById("joy");
const stick=document.getElementById("stick");
let jx=0,jy=0;

joy.addEventListener("touchmove",e=>{
  const r=joy.getBoundingClientRect();
  const t=e.touches[0];
  jx=t.clientX-r.left-60;
  jy=t.clientY-r.top-60;
  stick.style.left=40+jx*0.4+"px";
  stick.style.top =40+jy*0.4+"px";
});
joy.addEventListener("touchend",()=>{
  jx=jy=0;
  stick.style.left="40px";
  stick.style.top ="40px";
});

// MESAFE
function hit(ax,ay,bx,by,dist){
  return Math.hypot(ax-bx,ay-by)<dist;
}

// OYUN DÖNGÜSÜ
function loop(){
  // OYUNCU
  px+=jx*0.05;
  py+=jy*0.05;
  player.style.left=px+"px";
  player.style.top =py+"px";

  // MERMİLER
  bullets=bullets.filter(b=>{
    b.y-=7;
    b.style.left=b.x+"px";
    b.style.top=b.y+"px";
    if(b.y<0){b.remove();return false;}

    enemies.forEach((e,ei)=>{
      if(hit(b.x,b.y,e.x,e.y,22)){
        e.hp-=50; // <<< SENİN HASARIN
        b.remove();
        bullets=bullets.filter(x=>x!==b);
        if(e.hp<=0){e.remove();enemies.splice(ei,1);}
      }
    });

    if(boss && hit(b.x,b.y,boss.x,boss.y,32)){
      boss.hp-=50; // <<< SENİN HASARIN
      b.remove();
      bullets=bullets.filter(x=>x!==b);
    }
    return true;
  });

  // KÜÇÜKLER SALDIRSIN
  enemies.forEach(e=>{
    let dx=px-e.x, dy=py-e.y;
    let d=Math.hypot(dx,dy)||1;
    e.x+=dx/d*e.speed;
    e.y+=dy/d*e.speed;
    e.style.left=e.x+"px";
    e.style.top=e.y+"px";

    e.hitCd--;
    if(d<25 && e.hitCd<=0){
      playerHP-=e.damage;
      e.hitCd=30;
    }
  });

  // BOSS ÇIKSIN
  if(enemies.length===0 && !boss) spawnBoss();

  // BOSS SALDIRI
  if(boss){
    let dx=px-boss.x, dy=py-boss.y;
    let d=Math.hypot(dx,dy)||1;
    boss.x+=dx/d*boss.speed;
    boss.y+=dy/d*boss.speed;
    boss.style.left=boss.x+"px";
    boss.style.top=boss.y+"px";

    boss.hitCd--;
    if(d<35 && boss.hitCd<=0){
      playerHP-=boss.damage;
      boss.hitCd=25;
    }

    if(boss.hp<=0){
      boss.remove();
      boss=null;
      spawnEnemies();
    }
  }

  // ÖLÜNCE
  if(playerHP<=0){
    alert("ÖLDÜN");
    location.reload();
  }

  requestAnimationFrame(loop);
}
</script>
</body>
</html>