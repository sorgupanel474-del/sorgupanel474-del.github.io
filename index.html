<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Yürü & Çarp</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    background: #111;
    overflow: hidden;
    font-family: Arial, sans-serif;
    color: #0f0;
  }
  #puan {
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 20px;
  }
  #oyun {
    position: relative;
    width: 100vw;
    height: 100vh;
  }
  .player {
    position: absolute;
    width: 40px;
    height: 40px;
    background: #00ffcc;
    border-radius: 8px;
    bottom: 40px;
    left: 50%;
  }
  .npc {
    position: absolute;
    width: 35px;
    height: 35px;
    background: red;
    border-radius: 50%;
    bottom: 40px;
  }
</style>
</head>
<body>

<div id="puan">Puan: 0</div>
<div id="oyun">
  <div id="player" class="player"></div>
</div>

<script>
const oyun = document.getElementById("oyun");
const player = document.getElementById("player");
const puanYazi = document.getElementById("puan");

let x = window.innerWidth / 2;
let puan = 0;

// dokunulan yere doğru yürü
oyun.addEventListener("touchstart", e => {
  x = e.touches[0].clientX - 20;
});

function npcOlustur() {
  const npc = document.createElement("div");
  npc.className = "npc";
  npc.style.left = Math.random() * (window.innerWidth - 40) + "px";
  oyun.appendChild(npc);

  let yukari = false;

  const hereket = setInterval(() => {
    let py = parseInt(player.style.bottom || 40);
    let ny = parseInt(npc.style.bottom || 40);

    // çarpışma
    const px = player.getBoundingClientRect();
    const nx = npc.getBoundingClientRect();

    if (
      px.left < nx.right &&
      px.right > nx.left &&
      px.top < nx.bottom &&
      px.bottom > nx.top
    ) {
      puan++;
      puanYazi.innerText = "Puan: " + puan;
      npc.remove();
      clearInterval(herket);
    }
  }, 50);

  setTimeout(() => {
    if (npc.parentNode) npc.remove();
    clearInterval(herket);
  }, 4000);
}

// oyuncu hareketi
setInterval(() => {
  player.style.left = x + "px";
}, 20);

// npc yağmuru
setInterval(npcOlustur, 1200);
</script>

</body>
</html>